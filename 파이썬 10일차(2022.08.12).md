# 파이썬공부 10일차(2022.08.12)
### AB테스트
------
진행 전 확인사항
1. 샘플 사이즈(방문자 수) : 충분한 데이터가 있어야 통계적으로 의미있는 차이가 보인다.(MDE를 통해 사이즈 유추 가능)   
      MDE(Minumum Detectable Effect) : 두 샘플의 전환율이 의미를 갖는 최소한의 차이
2. 순 방문자 수 확인 : 중복을 제거하여 정확한 결과를 도출한다.
3. 진행기간 : 30일 이하 추천
	- 통계적 측면 : 샘플사이즈 증가 -> 표준오차 감소 -> 그래프가 모수에 가까워지며 P-Value 감소 -> 1종오류 가능성
	- 비즈니스적 측면 : 검증되지 않은 새로운 소재이기 때문에 오래하면 좋지 않음   
![image](https://user-images.githubusercontent.com/110000734/184354871-17b8b584-9216-40df-8831-7771a847e9ea.png)
4.  각 샘플의 전환률
5. 대조군과 실험군의 샘플 수 (옵티마이즐리 = AB-test의 적정 샘플 사이즈 계산 사이트)
----------------------------------------
### AB테스트 귀무가설 확인 하는 방법
> Ho = Ha = H(전체 전환률)   
> 두 데이터의 접점을 확인하여 귀무가설 채택 or 기각   
#### 방법1. random.choice이용
p = (확률) # p확률을 가진 모집단에서 샘플링한다는 의미(전체 전환률이 같다고 보기 때문에 전체 전환률 사용)
#### 방법2. Binomial distribution
np.random.binomial(변수, 전환률, 샘플갯수)/인원수?   
두 개의 차이값으로 hist를 만들고, 실험군과 비교
#### 방법3. z-test
import statsmodels.api as sm   
sm.stats.proportions_ztest([통계치1,통계치2,], [갯수1, 개수2], alternative = smaller(대립가설))   

---
### z-test
- 모집단이 정규분포여야 한다.
- 모분산을 알고 있는 경우(모분산을 몰라도 정규분포면 가능하다.)
- 표본의 크기가 커야한다.(n>=30)
- Z분포는 평균이며, 평균이 0이고 표준편차가 1이다.
- 모집단의 크기가 크기 때문에 부트스트래핑을 통해서 극한중심원리를 바탕으로 샘플의 표준편차를 사용해도 된다.
---

### 오늘의 함수
```
.nunique() # 중복을 제외한 데이터 확인

날짜칼럼에서 날짜 빼오기
from datetime import datetime
변수 = pd.to_datetime(df[‘날짜컬럼’])
변수.max() -변수.min() 


데이터 지우기
df.drop(변수, inplace = True) #inplace = True(드랍 후 데이터 저장)or False(드랍 후 데이터 저장X)   
df.duplicates['칼럼']


.value_counts(normalize = True) # 값 별 normalize = True(비율저장) or False(갯수저장) , ascending = True(오름)or False(내림)
  ex) per = df['offer'].value_counts(normalize=True) # offer 값 별 칼럼의 비율 추출
      round(per[0] - per[1], 3)                      # 0행의 비율 - 1행의 비율 .000


df.groupby('변수1').변수2.mean()  # 변수1을 기준으로 변수2의 평균
```
